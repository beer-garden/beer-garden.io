<!DOCTYPE html><!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8 ]><!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="stylesheet" href="/stylesheets/styles.css"><script src="/javascripts/jquery.js"></script><script src="/javascripts/bootstrap.min.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-113442079-2"></script><title>Beer Garden Documentation</title></head><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-113442079-2');</script><body class="antialiased"><div class="bootstrap"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle Navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="/images/bg-banner.png">Beer Garden</img></a></div><div class="collapse navbar-collapse" id="navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li class="divider"></li><li><a href="https://github.com/beer-garden/beer-garden">Code</a></li><li class="divider"></li><li><a href="/docs/">Docs</a></li></ul></div></div></nav><main><div class="bootstrap masthead"><div class="container"><h2 class="hero">Customizing Command Forms</h2></div></div><div class="bootstrap container"><div class="row top-buffer"><div class="col-lg-4"><div class="col-lg-12"><div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups"><div class="btn-group mr-2" role="group" aria-label="First group"><button class="btn btn-default toggle-navigation" type="button" href="#"><span class="toggle-target"><i class="fa fa-toggle-on"></i><i class="fa fa-toggle-off"></i> Nav</span></button></div><div class="btn-group-mr-2 pull-right" role="group" aria-label="First Group"><a class="btn btn-default" href="https://github.com/beer-garden/beer-garden.io/edit/master//docs/plugins/custom-display.adoc">Edit</a><a class="btn btn-default" href="https://github.com/beer-garden/beer-garden.io/raw/master//docs/plugins/custom-display.adoc">Raw</a><a class="btn btn-default" href="https://github.com/beer-garden/beer-garden.io/commits/master//docs/plugins/custom-display.adoc">History</a></div></div></div><div class="col-lg-12 navigation"><div id="toc" class="toc"><div class="title" id="toctitle">Table of Contents</div><ul class="sectlevel1">
<li><a href="#schema-and-or-form-modification">Schema and/or Form Modification</a></li>
<li><a href="#command-page-replacement">Command Page Replacement</a></li>
</ul></div></div></div><div class="col-lg-8" id="docContent"><div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The features described on this page are considered deprecated and will be removed in the relatively near future.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One of the benefits of Beer Garden is the web form that&#8217;s automatically created for each Command. We try hard to make sure every combination of parameters will result in a form that makes sense and to give Plugin developers the tools they need to express their data. However, there may be a bug in a specific corner case, or you may want to change the form directly to fit your application. The following sections can help in those cases.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="schema-and-or-form-modification"><a class="anchor" href="#schema-and-or-form-modification"></a>Schema and/or Form Modification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The form is generated using a package called Angular Schema Form (ASF). A complete tutorial on ASF is outside the scope of this document, so if you&#8217;re unfamiliar with how ASF works please consult their documentation. At a very high level: ASF takes a JSON Schema (data model) and Form (presentation and styling) and uses those to construct the form that&#8217;s presented on the Command View page. Behind the scenes the current data state is stored in the Model, which is updated whenever the user makes changes. This Model is what&#8217;s shown in the Preview pane.</p>
</div>
<div class="paragraph">
<p>The normal Beer Garden behavior is to use the Command definition to construct a Schema and Form for a particular Command. However, Beer Garden allows overriding either of these on a per-command basis.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When overriding the Schema or Form definition, it is highly recommended to use the Beer Garden-generated Schema or Form as a starting point. Set the <code>debug_mode</code> option to <code>true</code> in the Brew-view configuration to enable extra displays on the Command View page.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, a Command defined like this:</p>
</div>
<div class="listingblock">
<div class="title">Normal Command</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="decorator">@parameter</span>(key=<span class="string"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>, type=<span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>, optional=<span class="predefined-constant">False</span>)
<span class="keyword">def</span> <span class="function">echo</span>(<span class="predefined-constant">self</span>, message):
    <span class="keyword">return</span> message</code></pre>
</div>
</div>
<div class="paragraph">
<p>Will result in these definitions:</p>
</div>
<div class="listingblock">
<div class="title">Schema</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="key"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>: {
  <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">optional</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">nullable</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">null</span><span class="delimiter">&quot;</span></span>
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Form</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to make the field read-only you can add the <code>readonly</code> key to the form definition:</p>
</div>
<div class="listingblock">
<div class="title">Normal Command</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="decorator">@command</span>(form={<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>], <span class="string"><span class="delimiter">&quot;</span><span class="content">readonly</span><span class="delimiter">&quot;</span></span>: <span class="predefined-constant">True</span>})
<span class="decorator">@parameter</span>(key=<span class="string"><span class="delimiter">&quot;</span><span class="content">message</span><span class="delimiter">&quot;</span></span>, type=<span class="string"><span class="delimiter">&quot;</span><span class="content">String</span><span class="delimiter">&quot;</span></span>, optional=<span class="predefined-constant">False</span>)
<span class="keyword">def</span> <span class="function">echo</span>(<span class="predefined-constant">self</span>, message):
    <span class="keyword">return</span> message</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the Angular Schema Form documentation for examples of ways to modify the Form.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Changing the Schema or Form does not change the data constraints of the Command. For this reason it&#8217;s recommended to <strong>not</strong> modify the Schema, as that can cause the Request to fail Beer Garden validation during creation.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Don&#8217;t forget to include <strong>all</strong> parameters in the <code>form</code> definition. The form definition can be an array as well as a dictionary.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command-page-replacement"><a class="anchor" href="#command-page-replacement"></a>Command Page Replacement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Beer Garden also supports <strong>completely</strong> replacing the Command View page with custom HTML. This is intended to allow developers to implement functionality beyond what Angular Schema Form can provide.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This feature should be considered a Beta capability. If you&#8217;re interested in using this feature in production please contact the Beer Garden team.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To use an alternate Command View page pass a path to the file as the <code>template</code> argument to the <code>@command</code> decorator:</p>
</div>
<div class="listingblock">
<div class="title">Command Page Replacement</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span class="decorator">@command</span>(template=<span class="string"><span class="delimiter">'</span><span class="content">./resources/minimalist.html</span><span class="delimiter">'</span></span>)
<span class="keyword">def</span> <span class="function">echo_minimalist</span>(<span class="predefined-constant">self</span>, message):
    <span class="keyword">return</span> message</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>minimalist.html</code> page should define a way for the user to submit a POST request to <code>/api/v1/requests</code> with the Request to be created in the body. The request <code>content-type</code> can be either 'application/json' or 'application/x-www-form-urlencoded'.</p>
</div>
<div class="paragraph">
<p>Please note that the template HTML will still be rendered in the context of the Beer Garden Angular application. Since this HTML is outside Angular control it&#8217;s treated as untrusted, which causes certain elements to be removed. If you understand the risks associated with removing this restriction and want to allow these elements you can set the <code>allow_unsafe_templates</code> option to <code>true</code> in the Brew-view configuration.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Please <strong>make sure</strong> you understand the implications of allowing unsafe templates, especially in a production environment. Again, please reach out to the Beer Garden team if you&#8217;re interested in using this capability.
</td>
</tr>
</table>
</div>
</div>
</div></div><hr></div></div></main></div><footer id="bgfooter"><div class="container"><div class="row"><div class="col-sm-3"><h5>Get Started</h5><ul><li><a href="/">Home</a></li><li><a href="https://github.com/beer-garden/beer-garden/blob/master/CONTRIBUTING.md">Contribute</a></li></ul></div><div class="col-sm-3"><h5>About us</h5><ul><li><a href="https://github.com/beer-garden/beer-garden/blob/master/AUTHORS.md">Contributors</a></li><li><a href="/news">News</a></li></ul></div><div class="col-sm-3"><h5>Support</h5><ul><li><a href="https://github.com/beer-garden/beer-garden/issues">GitHub</a></li></ul></div><div class="col-sm-3 info"><h5>Information</h5><p>Composed in AsciiDoc. Styled by bootstrap. Baked with Awestruct.</p></div></div></div><div class="social-networks"><a class="github" href="https://github.com/beer-garden/beer-garden"><i class="fa fa-github"></i></a></div><div class="footer-copyright"><p>© Beer Garden Project 2022.</p></div></footer></body><script>$('.toggle-navigation').click(function() { $('.navigation').toggle(); $('#docContent').toggleClass('col-lg-8'); $('#docContent').toggleClass('col-lg-12'); $('#docContent').toggleClass('top-buffer'); $('.toggle-target').toggleClass('off'); });</script>