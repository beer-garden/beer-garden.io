<!DOCTYPE html><!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8 ]><!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="stylesheet" href="/stylesheets/styles.css"><script src="/javascripts/jquery.js"></script><script src="/javascripts/bootstrap.min.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-113442079-2"></script><title>Beer Garden Documentation</title></head><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-113442079-2');</script><body class="antialiased"><div class="bootstrap"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle Navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="/images/bg-banner.png">Beer Garden</img></a></div><div class="collapse navbar-collapse" id="navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li class="divider"></li><li><a href="https://github.com/beer-garden/beer-garden">Code</a></li><li class="divider"></li><li><a href="/docs/">Docs</a></li></ul></div></div></nav><main><div class="bootstrap masthead"><div class="container"><h2 class="hero">API Users Guide</h2></div></div><div class="bootstrap container"><div class="row top-buffer"><div class="col-lg-4"><div class="col-lg-12"><div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups"><div class="btn-group mr-2" role="group" aria-label="First group"><button class="btn btn-default toggle-navigation" type="button" href="#"><span class="toggle-target"><i class="fa fa-toggle-on"></i><i class="fa fa-toggle-off"></i> Nav</span></button></div><div class="btn-group-mr-2 pull-right" role="group" aria-label="First Group"><a class="btn btn-default" href="https://github.com/beer-garden/beer-garden.io/edit/master//docs/app/api-users-guide.adoc">Edit</a><a class="btn btn-default" href="https://github.com/beer-garden/beer-garden.io/raw/master//docs/app/api-users-guide.adoc">Raw</a><a class="btn btn-default" href="https://github.com/beer-garden/beer-garden.io/commits/master//docs/app/api-users-guide.adoc">History</a></div></div></div><div class="col-lg-12 navigation"><div id="toc" class="toc"><div class="title" id="toctitle">Table of Contents</div><ul class="sectlevel1">
<li><a href="#client-libraries">Client Libraries</a></li>
<li><a href="#requests">Requests</a>
<ul class="sectlevel2">
<li><a href="#create-with-python">Create with Python</a></li>
<li><a href="#create-with-rest">Create with REST</a></li>
<li><a href="#check-the-status">Check the Status</a></li>
</ul>
</li>
<li><a href="#do-more-with-rest">Do More with Rest</a></li>
</ul></div></div></div><div class="col-lg-8" id="docContent"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide is intended for people who would like to use Beer Garden&#8217;s API. Basically, if you want to use Beer Garden without the web interface you&#8217;ve come to the right place!</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you feel like you know REST pretty well, Beer Garden comes with OpenAPI (formerly known as Swagger) documentation that helps you explore the REST API yourself. You can find a SwaggerUI page linked from the About page of any Beer Garden web UI.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This guide assumes you&#8217;re at least somewhat aware of how Beer Garden is organized. If you need a refresher you should check out
<a href="/docs/startup/what-is-beergarden/">what is Beer Garden?</a>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="client-libraries"><a class="anchor" href="#client-libraries"></a>Client Libraries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Currently, the only supported library is in the python language. We produce a set of bindings called <code>brewtils</code> to help you, not only create plugins, but also interact with Beer Garden and its varied interfaces. If you&#8217;d like to learn more about <code>brewtils</code>, you should <a href="https://brewtils.readthedocs.io">check out the API documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requests"><a class="anchor" href="#requests"></a>Requests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Request API is arguably the most important endpoint that Beer Garden provides. Remember that Requests are units of work that you want Beer Garden to perform. So to get Beer Garden (and plugins) to do anything useful you&#8217;ll need to create a request.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s assume you have a System called <code>echo</code> with a Command <code>say</code> which takes a single parameter <code>message</code>. Let&#8217;s run through how to get Beer Garden to execute this request.</p>
</div>
<div class="sect2">
<h3 id="create-with-python"><a class="anchor" href="#create-with-python"></a>Create with Python</h3>
<div class="paragraph">
<p>The <code>brewtils</code> Python library includes a <code>SystemClient</code> designed to make this as easy as possible. Create a <code>SystemClient</code> for a particular Beer Garden system and then invoke methods on the client as if it were a normal Python object:</p>
</div>
<div class="listingblock">
<div class="title">SystemClient Example</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="python"><span class="keyword">from</span> <span class="include">brewtils.rest.system_client</span> <span class="keyword">import</span> <span class="include">SystemClient</span>

client = SystemClient(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>, <span class="integer">2337</span>, system_name=<span class="string"><span class="delimiter">&quot;</span><span class="content">echo</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="1"></i><b>(1)</b>

request = client.echo(message=<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, World!</span><span class="delimiter">&quot;</span></span>) <i class="conum" data-value="2"></i><b>(2)</b>

print(request.status)
print(request.output)</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create the client, passing Beer Garden connection parameters and the target System name</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create a Request for the 'echo' Command as if you were calling a method</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>SystemClient</code> is a blocking client that will make a rest request that is formatted correctly and returns a request object. This request object can then be queried the same way you would query a normal request object.</p>
</div>
<div class="paragraph">
<p>If the system you are using is multi-instanced, you can specify the default instance to use at the system level:</p>
</div>
<div class="listingblock">
<div class="title">Default Instance Example</div>
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="python">client = SystemClient(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>, <span class="integer">2337</span>, system_name=<span class="string"><span class="delimiter">&quot;</span><span class="content">echo</span><span class="delimiter">&quot;</span></span>, default_instance=<span class="string"><span class="delimiter">&quot;</span><span class="content">01</span><span class="delimiter">&quot;</span></span>)

request = client.say(message=<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, Instance 01!</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also specify a different instance when creating a Request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight nowrap"><code data-lang="python">request = client.say(message=<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello, Instance 02!</span><span class="delimiter">&quot;</span></span>, _instance_name=<span class="string"><span class="delimiter">&quot;</span><span class="content">02</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-with-rest"><a class="anchor" href="#create-with-rest"></a>Create with REST</h3>
<div class="paragraph">
<p>The <code>SystemClient</code> is a nice abstraction, but it can be useful to know what&#8217;s happening under the hood. Internally the <code>SystemClient</code> is making a POST request to the <code>/api/v1/requests</code> endpoint with a Request definition. You can replicate this using curl:</p>
</div>
<div class="listingblock">
<div class="title">Create a Request with curl</div>
<div class="content">
<pre class="nowrap">$ curl -X POST -H 'Content-Type: application/json' -d \
'{
  "namespace": "default"
  "system": "echo",
  "system_version": "1.0.0.dev",
  "instance_name": "default",
  "command": "say",
  "parameters": {"message": "Hello from curl!" }
}' \
localhost:2337/api/v1/requests</pre>
</div>
</div>
<div class="paragraph">
<p>Assuming everything works (you do have a System named 'echo' right?) Beer Garden will return a response with status code 204 and JSON representing the Request you just created.</p>
</div>
</div>
<div class="sect2">
<h3 id="check-the-status"><a class="anchor" href="#check-the-status"></a>Check the Status</h3>
<div class="paragraph">
<p>Now you have a brand new Request. That&#8217;s cool, but it&#8217;s missing the most important field: the output. That&#8217;s because the Request definition Beer Garden returned really was <em>brand new</em> - it hadn&#8217;t been processed by the 'echo' plugin yet. You can verify this yourself by looking at the "status" and "output" fields: they&#8217;ll be <code>CREATED</code> and null, respectively.</p>
</div>
<div class="paragraph">
<p>Unless your Beer Garden is <em>very</em> busy, by the time you&#8217;ve read this far your 'echo' plugin should have processed your Request. All we need to get an update is the 'id' field of the Request. You can find it by looking at the response from the POST you just made. Let&#8217;s pretend it&#8217;s <code>555a56fae9a45a2ad182ac16</code>.</p>
</div>
<div class="listingblock">
<div class="title">Get a Request with curl</div>
<div class="content">
<pre class="nowrap">$ curl http://localhost:2337/api/v1/requests/555a56fae9a45a2ad182ac16</pre>
</div>
</div>
<div class="paragraph">
<p>It is possible that your request will not be done, and the status could say something like <code>CREATED</code> or <code>IN_PROGRESS</code>. If your request failed, you will see <code>ERROR</code> as the status field.</p>
</div>
<div class="paragraph">
<p>As you can see, the Request API is fairly easy to use, and helps keep a nice audit log for what happened on your system.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="do-more-with-rest"><a class="anchor" href="#do-more-with-rest"></a>Do More with Rest</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Creating and querying a Request is just the tip of the REST iceberg. If you&#8217;re interesting in seeing <em>everything</em> Beer Garden can do through REST calls you should really check out the Swagger documentation. You can get to it from the About page of any Beer Garden UI, and from there you&#8217;ll be able to see all the available endpoints with their expected input and output models.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Each endpoint also has a 'Try it out' feature to let you easily experiment, and it&#8217;ll even show you the equivalent <code>curl</code> command.
</td>
</tr>
</table>
</div>
</div>
</div></div><hr></div></div></main></div><footer id="bgfooter"><div class="container"><div class="row"><div class="col-sm-3"><h5>Get Started</h5><ul><li><a href="/">Home</a></li><li><a href="https://github.com/beer-garden/beer-garden/blob/master/CONTRIBUTING.md">Contribute</a></li></ul></div><div class="col-sm-3"><h5>About us</h5><ul><li><a href="https://github.com/beer-garden/beer-garden/blob/master/AUTHORS.md">Contributors</a></li><li><a href="/news">News</a></li></ul></div><div class="col-sm-3"><h5>Support</h5><ul><li><a href="https://github.com/beer-garden/beer-garden/issues">GitHub</a></li></ul></div><div class="col-sm-3 info"><h5>Information</h5><p>Composed in AsciiDoc. Styled by bootstrap. Baked with Awestruct.</p></div></div></div><div class="social-networks"><a class="github" href="https://github.com/beer-garden/beer-garden"><i class="fa fa-github"></i></a></div><div class="footer-copyright"><p>© Beer Garden Project 2022.</p></div></footer></body><script>$('.toggle-navigation').click(function() { $('.navigation').toggle(); $('#docContent').toggleClass('col-lg-8'); $('#docContent').toggleClass('col-lg-12'); $('#docContent').toggleClass('top-buffer'); $('.toggle-target').toggleClass('off'); });</script>