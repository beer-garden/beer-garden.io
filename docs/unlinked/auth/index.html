<!DOCTYPE html><!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]--><!--[if gt IE 8 ]><!--><html class="no-js" lang="en"><!--<![endif]--><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="stylesheet" href="/stylesheets/styles.css"><script src="/javascripts/jquery.js"></script><script src="/javascripts/bootstrap.min.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-113442079-2"></script><title>Beer Garden Documentation</title></head><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'UA-113442079-2');</script><body class="antialiased"><div class="bootstrap"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle Navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><img src="/images/bg-banner.png">Beer Garden</img></a></div><div class="collapse navbar-collapse" id="navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="/">Home</a></li><li class="divider"></li><li><a href="https://github.com/beer-garden/beer-garden">Code</a></li><li class="divider"></li><li><a href="/docs/">Docs</a></li></ul></div></div></nav><main><div class="bootstrap masthead"><div class="container"><h2 class="hero">Authentication and Authorization</h2></div></div><div class="bootstrap container"><div class="row top-buffer"><div class="col-lg-4"><div class="col-lg-12"><div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups"><div class="btn-group mr-2" role="group" aria-label="First group"><button class="btn btn-default toggle-navigation" type="button" href="#"><span class="toggle-target"><i class="fa fa-toggle-on"></i><i class="fa fa-toggle-off"></i> Nav</span></button></div><div class="btn-group-mr-2 pull-right" role="group" aria-label="First Group"><a class="btn btn-default" href="https://github.com/beer-garden/beer-garden.io/edit/master//docs/unlinked/auth.adoc">Edit</a><a class="btn btn-default" href="https://github.com/beer-garden/beer-garden.io/raw/master//docs/unlinked/auth.adoc">Raw</a><a class="btn btn-default" href="https://github.com/beer-garden/beer-garden.io/commits/master//docs/unlinked/auth.adoc">History</a></div></div></div><div class="col-lg-12 navigation"><div id="toc" class="toc"><div class="title" id="toctitle">Table of Contents</div><ul class="sectlevel1">
<li><a href="#models">Models</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#default-users-roles">Default Users / Roles</a>
<ul class="sectlevel2">
<li><a href="#roles">Roles</a>
<ul class="sectlevel3">
<li><a href="#code-bg-readonly-code"><code>bg-readonly</code></a></li>
<li><a href="#code-bg-operator-code"><code>bg-operator</code></a></li>
<li><a href="#code-bg-anonymous-code"><code>bg-anonymous</code></a></li>
<li><a href="#code-bg-admin-code"><code>bg-admin</code></a></li>
<li><a href="#code-bg-plugin-code"><code>bg-plugin</code></a></li>
</ul>
</li>
<li><a href="#users">Users</a>
<ul class="sectlevel3">
<li><a href="#code-admin-code"><code>admin</code></a></li>
<li><a href="#code-anonymous-code"><code>anonymous</code></a></li>
</ul>
</li>
</ul>
</li>
</ul></div></div></div><div class="col-lg-8" id="docContent"><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Beer Garden authorization exists to allow different users different levels of access to the system. It does this by using the concepts of Users, Roles, and Permissions.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="models"><a class="anchor" href="#models"></a>Models</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first thing to discuss is how Beer Garden organizes auth objects:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Permissions</dt>
<dd>
<p>Represent the ability to execute a specific action. For example, the <code>REQUEST_CREATE</code> permission controls the ability to create new Beer Garden Requests.</p>
</dd>
<dt class="hdlist1">Roles</dt>
<dd>
<p>Groups of permissions. They exist to make it easy to define standard sets of permissions that make sense for your environment and assign them to Users.</p>
</dd>
<dt class="hdlist1">Users</dt>
<dd>
<p>Represent an entity interacting with Beer Garden. They can be an end user, a remote plugin, or some external system that wants to use the Beer Garden API.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s talk about how to set up authorization. First, you&#8217;ll want to enable it in the Brew-view configuration file:</p>
</div>
<div class="listingblock">
<div class="title">brew-view-config.yaml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">auth</span>:
  <span class="key">enabled</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">guest_login_enabled</span>: <span class="string"><span class="content">true</span></span>
  <span class="key">token</span>:
    <span class="key">algorithm</span>: <span class="string"><span class="content">HS256</span></span>
    <span class="key">lifetime</span>: <span class="string"><span class="content">1200</span></span>
    <span class="key">secret</span>: <span class="string"><span class="content">CHANGE THIS!!</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Two things to note here:
1. <code>enabled</code> has been set to <code>true</code>
2. <code>guest_login_enabled</code> is <code>true</code>
3. <code>secret</code> has been changed. THIS IS SUPER IMPORTANT.</p>
</div>
<div class="paragraph">
<p>Please, please, change the secret value. Beer Garden uses that to sign and verify all authentication tokens. If it has not been changed from the default value your data won&#8217;t be secure.</p>
</div>
<div class="paragraph">
<p>Setting <code>guest_login_enabled</code> to <code>true</code> allows unauthenticated users basic access to the system. We&#8217;ll cover that more later.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="default-users-roles"><a class="anchor" href="#default-users-roles"></a>Default Users / Roles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you start Beer Garden for the first time some default roles and users are created for your convenience.</p>
</div>
<div class="sect2">
<h3 id="roles"><a class="anchor" href="#roles"></a>Roles</h3>
<div class="sect3">
<h4 id="code-bg-readonly-code"><a class="anchor" href="#code-bg-readonly-code"></a><code>bg-readonly</code></h4>
<div class="paragraph">
<p>This role allows read access to everything, but only read access. This role is good for users who should be able to look but not touch.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bg-command-read</code></p>
</li>
<li>
<p><code>bg-event-read</code></p>
</li>
<li>
<p><code>bg-instance-read</code></p>
</li>
<li>
<p><code>bg-job-read</code></p>
</li>
<li>
<p><code>bg-queue-read</code></p>
</li>
<li>
<p><code>bg-request-read</code></p>
</li>
<li>
<p><code>bg-system-read</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="code-bg-operator-code"><a class="anchor" href="#code-bg-operator-code"></a><code>bg-operator</code></h4>
<div class="paragraph">
<p>This role is the normal roll for a non-administrator Beer Garden user. It allows read access to everything, but it also allows Request creation, which means that anyone with this role can initiate requests.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bg-command-read</code></p>
</li>
<li>
<p><code>bg-event-read</code></p>
</li>
<li>
<p><code>bg-instance-read</code></p>
</li>
<li>
<p><code>bg-job-read</code></p>
</li>
<li>
<p><code>bg-queue-read</code></p>
</li>
<li>
<p><code>bg-request-read</code></p>
</li>
<li>
<p><code>bg-system-read</code></p>
</li>
<li>
<p><code>bg-request-create</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="code-bg-anonymous-code"><a class="anchor" href="#code-bg-anonymous-code"></a><code>bg-anonymous</code></h4>
<div class="paragraph">
<p>This role is special in that it&#8217;s used by the anonymous user. That is, users that have not authenticated will have this role. By default it&#8217;s identical to the read-only role, but it&#8217;s separate to allow for customization.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bg-command-read</code></p>
</li>
<li>
<p><code>bg-event-read</code></p>
</li>
<li>
<p><code>bg-instance-read</code></p>
</li>
<li>
<p><code>bg-job-read</code></p>
</li>
<li>
<p><code>bg-queue-read</code></p>
</li>
<li>
<p><code>bg-request-read</code></p>
</li>
<li>
<p><code>bg-system-read</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="code-bg-admin-code"><a class="anchor" href="#code-bg-admin-code"></a><code>bg-admin</code></h4>
<div class="paragraph">
<p>This role permits everything and is intended for super users.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bg-all</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="code-bg-plugin-code"><a class="anchor" href="#code-bg-plugin-code"></a><code>bg-plugin</code></h4>
<div class="paragraph">
<p>This role has all the permissions necessary for plugins to do their jobs. All plugins should have these permissions, or a superset of them or things are going to go sideways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bg-instance-update</code></p>
</li>
<li>
<p><code>bg-job-create</code></p>
</li>
<li>
<p><code>bg-job-update</code></p>
</li>
<li>
<p><code>bg-request-create</code></p>
</li>
<li>
<p><code>bg-request-update</code></p>
</li>
<li>
<p><code>bg-system-create</code></p>
</li>
<li>
<p><code>bg-system-read</code></p>
</li>
<li>
<p><code>bg-system-update</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="users"><a class="anchor" href="#users"></a>Users</h3>
<div class="paragraph">
<p>These users are managed by Beer Garden.</p>
</div>
<div class="sect3">
<h4 id="code-admin-code"><a class="anchor" href="#code-admin-code"></a><code>admin</code></h4>
<div class="paragraph">
<p>This user can do everything since it has the <code>bg-admin</code> role. It&#8217;s created on startup if it doesn&#8217;t already exist and there are no other users (if you&#8217;ve created other users Beer Garden assumes that you removed the admin user on purpose and won&#8217;t fight with you). It&#8217;s recommended you change the password for this user if you want to keep it around.</p>
</div>
</div>
<div class="sect3">
<h4 id="code-anonymous-code"><a class="anchor" href="#code-anonymous-code"></a><code>anonymous</code></h4>
<div class="paragraph">
<p>This user is a little special. It&#8217;s created or removed based on the <code>guest_login_enabled</code> configuration value. It&#8217;s always given the <code>bg-anonymous</code> role, so if you want to control what unauthenticated users can do just modify the permissions for that role.</p>
</div>
</div>
</div>
</div>
</div></div><hr></div></div></main></div><footer id="bgfooter"><div class="container"><div class="row"><div class="col-sm-3"><h5>Get Started</h5><ul><li><a href="/">Home</a></li><li><a href="https://github.com/beer-garden/beer-garden/blob/master/CONTRIBUTING.md">Contribute</a></li></ul></div><div class="col-sm-3"><h5>About us</h5><ul><li><a href="https://github.com/beer-garden/beer-garden/blob/master/AUTHORS.md">Contributors</a></li><li><a href="/news">News</a></li></ul></div><div class="col-sm-3"><h5>Support</h5><ul><li><a href="https://github.com/beer-garden/beer-garden/issues">GitHub</a></li></ul></div><div class="col-sm-3 info"><h5>Information</h5><p>Composed in AsciiDoc. Styled by bootstrap. Baked with Awestruct.</p></div></div></div><div class="social-networks"><a class="github" href="https://github.com/beer-garden/beer-garden"><i class="fa fa-github"></i></a></div><div class="footer-copyright"><p>© Beer Garden Project 2022.</p></div></footer></body><script>$('.toggle-navigation').click(function() { $('.navigation').toggle(); $('#docContent').toggleClass('col-lg-8'); $('#docContent').toggleClass('col-lg-12'); $('#docContent').toggleClass('top-buffer'); $('.toggle-target').toggleClass('off'); });</script>