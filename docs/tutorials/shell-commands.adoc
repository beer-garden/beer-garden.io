== Example 2: Running Shell Commands
:imagesdir: ./images


In this example we'll explore running shell commands from Beer Garden plugins. We'll use `nslookup` because it's already available on most operating systems.

=== Execute Locally

[source, bash]
.Example
----
nslookup python.org
----

Go ahead and run this in the command line to ensure that it works properly in your environment. You should get something like the following

[source, bash]
.Example
----
Server:     <DNS Server>
Address:    <DNS Server Address>

Non-authoritative answer:
Name:    python.org
Address: 45.55.99.72

----

=== Create Base Class

Like the first example, let's build this out into a basic Python class.  For this example, we will provide the raw output but feel free to get creative with parsing the output.

[source,python]
.nslookup_plugin.py
----
import subprocess


class NSLookupClient:

    def nslookup(self, domain):
        return run(['nslookup', domain], capture_output=True, text=True).stdout


def main():
	client = NSLookupClient()
    print(client.nslookup("python.org"))


if __name__ == "__main__":
	main()
----

=== Convert to Beer Garden Plugin

Instead of creating a new class, let convert the function directly into a Beer Garden system command.
That way we can expose this function in the UI.

[source,python]
.nslookup_plugin.py
----
from subprocess import run

from brewtils import command, parameter, Plugin


class NSLookupClient:

    @command
    @parameter(
        key="domain",
        type="String",
        description="The domain to be looked up via NSLookup",
        default="python.org",
    )
    def nslookup(self, domain):
        return run(['nslookup', domain], capture_output=True, text=True).stdout


def main():
    plugin = Plugin(name='nslookup', version='1.0.0', description='Runs nslookup')
    plugin.client = NSLookupClient()
    plugin.run()


if __name__ == "__main__":
    main()
----

Now let's run the code and check it out on the Beer Garden UI.

    python nslookup_plugin.py --no-ssl-enabled --bg-host <host>

We can see that a field is now populated on the `Request Page` for the command and that `python.org` is pre-populated in the form. When you click `Make Request` you should get a similar result to the following.

image::nslookup-request.png[NSlookup Request]

We can see the raw response from the command we executed in the `Output` field.

image::nslookup-response.png[NSlookup Response]

=== Conclusion

This has been a basic example of how you can use Beer Garden to run shell commands. You can expand on this exampled to run bash files or any other command you have access to in your terminal.
